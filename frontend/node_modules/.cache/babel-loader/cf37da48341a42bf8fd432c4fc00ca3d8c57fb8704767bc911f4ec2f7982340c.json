{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import\"./styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=path=>\"\".concat(process.env.REACT_APP_API_URL||\"http://localhost:8080\").concat(path);export default function App(){const[token]=useState(localStorage.getItem(\"token\")||\"\");const[username]=useState(\"Ajay\");// Show name dynamically if needed\nconst[file,setFile]=useState(null);const[uploading,setUploading]=useState(false);const[progress,setProgress]=useState(0);const[ocrResult,setOcrResult]=useState(null);const[chatMode,setChatMode]=useState(\"none\");// none ‚Üí initial\n// chat ‚Üí user wants chat\n// upload ‚Üí user wants upload flow\nconst[messages,setMessages]=useState([{role:\"bot\",text:\"Hello üëã ‚Äî I‚Äôm Dr. Raghav. What would you like to do today?\",time:Date.now()}]);const[chatInput,setChatInput]=useState(\"\");const[chatLoading,setChatLoading]=useState(false);const chatEndRef=useRef(null);useEffect(()=>{if(chatEndRef.current)chatEndRef.current.scrollIntoView({behavior:\"smooth\"});},[messages,chatLoading]);// ------------------------\n// HANDLE FIRST MESSAGE\n// ------------------------\nconst handleFirstMessage=text=>{setMessages(m=>[...m,{role:\"user\",text,time:Date.now()},{role:\"bot\",text:\"Hi \".concat(username,\" \\uD83D\\uDC4B\\nHow may I assist you today?\"),time:Date.now()}]);// Offer options\nsetTimeout(()=>{setMessages(m=>[...m,{role:\"bot\",text:\"Would you like to:\\n\\n1Ô∏è‚É£ Chat with Doctor\\n2Ô∏è‚É£ Upload Medical Report?\",showOptions:true,time:Date.now()}]);},700);};// -----------------------------\n// OPTION SELECTION\n// -----------------------------\nconst chooseChat=()=>{setChatMode(\"chat\");setMessages(m=>[...m,{role:\"bot\",text:\"Great üë®‚Äç‚öïÔ∏è ‚Äî What symptoms are you experiencing today?\",time:Date.now()}]);};const chooseUpload=()=>{setChatMode(\"upload\");setMessages(m=>[...m,{role:\"bot\",text:\"Please upload your medical report (PDF or Image) üìÑ\",time:Date.now()}]);};// -----------------------------\n// FILE UPLOAD + OCR ‚Üí SUMMARY\n// -----------------------------\nconst uploadFile=()=>{if(!file)return alert(\"Please select a file (PDF / JPG / PNG).\");setUploading(true);setProgress(0);setOcrResult(null);const form=new FormData();form.append(\"file\",file);const xhr=new XMLHttpRequest();xhr.open(\"POST\",API(\"/api/ocr/extract\"),true);if(token)xhr.setRequestHeader(\"Authorization\",\"Bearer \"+token);xhr.upload.onprogress=e=>{if(e.lengthComputable){setProgress(Math.round(e.loaded/e.total*100));}};xhr.onreadystatechange=()=>{if(xhr.readyState===4){setUploading(false);setProgress(100);// SUCCESS\nif(xhr.status>=200&&xhr.status<300){const parsed=JSON.parse(xhr.responseText);setOcrResult(parsed);setMessages(m=>[...m,{role:\"bot\",text:\"I‚Äôve reviewed your report. Here is my medical interpretation:\",time:Date.now()},{role:\"bot\",text:parsed.summary||\"No summary available.\",time:Date.now()}]);return;}// FAILURE\nlet message=\"OCR failed (\".concat(xhr.status,\")\");try{const json=JSON.parse(xhr.responseText);message=json.message||JSON.stringify(json);}catch(_unused){message=xhr.responseText||message;}setMessages(m=>[...m,{role:\"bot\",text:\"\\u274C OCR Error: \".concat(message),time:Date.now()}]);}};xhr.send(form);};// -----------------------------\n// NORMAL CHAT MODE\n// -----------------------------\nconst sendChat=async()=>{const text=chatInput.trim();if(!text)return;// FIRST MESSAGE ‚Üí INIT FLOW\nif(messages.length===1&&chatMode===\"none\"){setChatInput(\"\");return handleFirstMessage(text);}if(chatMode!==\"chat\"){setMessages(m=>[...m,{role:\"bot\",text:\"Please choose an option: Chat or Upload report.\",time:Date.now()}]);return;}setMessages(m=>[...m,{role:\"user\",text,time:Date.now()}]);setChatInput(\"\");setChatLoading(true);try{const res=await fetch(API(\"/api/chat/message\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId:username,text})});let reply;try{const j=await res.json();reply=j.reply||j.text||JSON.stringify(j);}catch(_unused2){reply=await res.text();}setMessages(m=>[...m,{role:\"bot\",text:reply,time:Date.now()}]);}catch(_unused3){setMessages(m=>[...m,{role:\"bot\",text:\"‚ùå Error contacting server.\",time:Date.now()}]);}finally{setChatLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"wrap\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"AI Doctor\"}),/*#__PURE__*/_jsx(\"div\",{className:\"subtitle\",children:\"Clinic Portal\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-profile\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"doctor-avatar\",src:\"/doctor-male.png\",alt:\"doc\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-meta\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"doc-name\",children:\"Dr. Raghav\"}),/*#__PURE__*/_jsx(\"div\",{className:\"doc-role\",children:\"General Physician\"})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-grid\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"left\",children:chatMode===\"upload\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Upload Medical Report\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-row\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"file-chooser\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf,image/*\",onChange:e=>{var _e$target$files;return setFile(((_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0])||null);}}),file?file.name:\"Choose file\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:uploadFile,children:\"Upload & Analyze\"})]}),uploading&&/*#__PURE__*/_jsx(\"div\",{className:\"progress-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(progress,\"%\")}})})})]})}),/*#__PURE__*/_jsx(\"aside\",{className:\"right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card chat-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-title\",children:\"Consultation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-sub\",children:\"Chat with Dr. Raghav\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-body\",children:[messages.map((m,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message \".concat(m.role),children:[m.role===\"bot\"&&/*#__PURE__*/_jsx(\"img\",{className:\"avatar\",src:\"/doctor-male.png\",alt:\"doc\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bubble\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bubble-text\",children:[m.text,m.showOptions&&/*#__PURE__*/_jsxs(\"div\",{className:\"option-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:chooseChat,className:\"btn small\",children:\"\\uD83D\\uDCAC Chat with Doctor\"}),/*#__PURE__*/_jsx(\"button\",{onClick:chooseUpload,className:\"btn small\",children:\"\\uD83D\\uDCC4 Upload Report\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bubble-time\",children:new Date(m.time).toLocaleTimeString()})]})]},i)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"chat-input\",placeholder:\"Type your message...\",value:chatInput,onChange:e=>setChatInput(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&sendChat()}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:sendChat,children:\"Send\"})]})]})})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[\"\\xA9 \",new Date().getFullYear(),\" AI Doctor\"]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","API","path","concat","process","env","REACT_APP_API_URL","App","token","localStorage","getItem","username","file","setFile","uploading","setUploading","progress","setProgress","ocrResult","setOcrResult","chatMode","setChatMode","messages","setMessages","role","text","time","Date","now","chatInput","setChatInput","chatLoading","setChatLoading","chatEndRef","current","scrollIntoView","behavior","handleFirstMessage","m","setTimeout","showOptions","chooseChat","chooseUpload","uploadFile","alert","form","FormData","append","xhr","XMLHttpRequest","open","setRequestHeader","upload","onprogress","e","lengthComputable","Math","round","loaded","total","onreadystatechange","readyState","status","parsed","JSON","parse","responseText","summary","message","json","stringify","_unused","send","sendChat","trim","length","res","fetch","method","headers","body","userId","reply","j","_unused2","_unused3","className","children","src","alt","type","accept","onChange","_e$target$files","target","files","name","onClick","style","width","map","i","toLocaleTimeString","ref","placeholder","value","onKeyDown","key","getFullYear"],"sources":["/home/ajay/Downloads/ai-doctor-starter/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./styles.css\";\n\nconst API = (path) => `${process.env.REACT_APP_API_URL || \"http://localhost:8080\"}${path}`;\n\nexport default function App() {\n  const [token] = useState(localStorage.getItem(\"token\") || \"\");\n  const [username] = useState(\"Ajay\");   // Show name dynamically if needed\n  const [file, setFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [ocrResult, setOcrResult] = useState(null);\n  const [chatMode, setChatMode] = useState(\"none\");  \n  // none ‚Üí initial\n  // chat ‚Üí user wants chat\n  // upload ‚Üí user wants upload flow\n\n  const [messages, setMessages] = useState([\n    { role: \"bot\", text: \"Hello üëã ‚Äî I‚Äôm Dr. Raghav. What would you like to do today?\", time: Date.now() }\n  ]);\n\n  const [chatInput, setChatInput] = useState(\"\");\n  const [chatLoading, setChatLoading] = useState(false);\n  const chatEndRef = useRef(null);\n\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, chatLoading]);\n\n  // ------------------------\n  // HANDLE FIRST MESSAGE\n  // ------------------------\n  const handleFirstMessage = (text) => {\n    setMessages((m) => [\n      ...m,\n      { role: \"user\", text, time: Date.now() },\n      {\n        role: \"bot\",\n        text: `Hi ${username} üëã\\nHow may I assist you today?`,\n        time: Date.now()\n      }\n    ]);\n\n    // Offer options\n    setTimeout(() => {\n      setMessages((m) => [\n        ...m,\n        {\n          role: \"bot\",\n          text:\n            \"Would you like to:\\n\\n1Ô∏è‚É£ Chat with Doctor\\n2Ô∏è‚É£ Upload Medical Report?\",\n          showOptions: true,\n          time: Date.now()\n        }\n      ]);\n    }, 700);\n  };\n\n  // -----------------------------\n  // OPTION SELECTION\n  // -----------------------------\n  const chooseChat = () => {\n    setChatMode(\"chat\");\n    setMessages((m) => [\n      ...m,\n      {\n        role: \"bot\",\n        text: \"Great üë®‚Äç‚öïÔ∏è ‚Äî What symptoms are you experiencing today?\",\n        time: Date.now()\n      }\n    ]);\n  };\n\n  const chooseUpload = () => {\n    setChatMode(\"upload\");\n    setMessages((m) => [\n      ...m,\n      {\n        role: \"bot\",\n        text: \"Please upload your medical report (PDF or Image) üìÑ\",\n        time: Date.now()\n      }\n    ]);\n  };\n\n  // -----------------------------\n  // FILE UPLOAD + OCR ‚Üí SUMMARY\n  // -----------------------------\n  const uploadFile = () => {\n    if (!file) return alert(\"Please select a file (PDF / JPG / PNG).\");\n\n    setUploading(true);\n    setProgress(0);\n    setOcrResult(null);\n\n    const form = new FormData();\n    form.append(\"file\", file);\n\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", API(\"/api/ocr/extract\"), true);\n    if (token) xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n\n    xhr.upload.onprogress = (e) => {\n      if (e.lengthComputable) {\n        setProgress(Math.round((e.loaded / e.total) * 100));\n      }\n    };\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        setUploading(false);\n        setProgress(100);\n\n        // SUCCESS\n        if (xhr.status >= 200 && xhr.status < 300) {\n          const parsed = JSON.parse(xhr.responseText);\n          setOcrResult(parsed);\n\n          setMessages((m) => [\n            ...m,\n            {\n              role: \"bot\",\n              text:\n                \"I‚Äôve reviewed your report. Here is my medical interpretation:\",\n              time: Date.now()\n            },\n            {\n              role: \"bot\",\n              text: parsed.summary || \"No summary available.\",\n              time: Date.now()\n            }\n          ]);\n\n          return;\n        }\n\n        // FAILURE\n        let message = `OCR failed (${xhr.status})`;\n        try {\n          const json = JSON.parse(xhr.responseText);\n          message = json.message || JSON.stringify(json);\n        } catch {\n          message = xhr.responseText || message;\n        }\n\n        setMessages((m) => [\n          ...m,\n          { role: \"bot\", text: `‚ùå OCR Error: ${message}`, time: Date.now() }\n        ]);\n      }\n    };\n\n    xhr.send(form);\n  };\n\n  // -----------------------------\n  // NORMAL CHAT MODE\n  // -----------------------------\n  const sendChat = async () => {\n    const text = chatInput.trim();\n    if (!text) return;\n\n    // FIRST MESSAGE ‚Üí INIT FLOW\n    if (messages.length === 1 && chatMode === \"none\") {\n      setChatInput(\"\");\n      return handleFirstMessage(text);\n    }\n\n    if (chatMode !== \"chat\") {\n      setMessages((m) => [\n        ...m,\n        {\n          role: \"bot\",\n          text: \"Please choose an option: Chat or Upload report.\",\n          time: Date.now()\n        }\n      ]);\n      return;\n    }\n\n    setMessages((m) => [...m, { role: \"user\", text, time: Date.now() }]);\n    setChatInput(\"\");\n    setChatLoading(true);\n\n    try {\n      const res = await fetch(API(\"/api/chat/message\"), {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ userId: username, text })\n      });\n\n      let reply;\n      try {\n        const j = await res.json();\n        reply = j.reply || j.text || JSON.stringify(j);\n      } catch {\n        reply = await res.text();\n      }\n\n      setMessages((m) => [...m, { role: \"bot\", text: reply, time: Date.now() }]);\n    } catch {\n      setMessages((m) => [\n        ...m,\n        { role: \"bot\", text: \"‚ùå Error contacting server.\", time: Date.now() }\n      ]);\n    } finally {\n      setChatLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"wrap\">\n      {/* --- HEADER --- */}\n      <header className=\"header\">\n        <div className=\"brand\">\n          <div className=\"logo\">AI Doctor</div>\n          <div className=\"subtitle\">Clinic Portal</div>\n        </div>\n        <div className=\"doctor-profile\">\n          <img className=\"doctor-avatar\" src=\"/doctor-male.png\" alt=\"doc\" />\n          <div className=\"doctor-meta\">\n            <div className=\"doc-name\">Dr. Raghav</div>\n            <div className=\"doc-role\">General Physician</div>\n          </div>\n        </div>\n      </header>\n\n      {/* --- MAIN GRID --- */}\n      <main className=\"main-grid\">\n        {/* LEFT COLUMN ‚Äî upload box shown only if upload flow */}\n        <section className=\"left\">\n          {chatMode === \"upload\" && (\n            <div className=\"card\">\n              <h3>Upload Medical Report</h3>\n              <div className=\"upload-row\">\n                <label className=\"file-chooser\">\n                  <input\n                    type=\"file\"\n                    accept=\".pdf,image/*\"\n                    onChange={(e) => setFile(e.target.files?.[0] || null)}\n                  />\n                  {file ? file.name : \"Choose file\"}\n                </label>\n                <button className=\"btn primary\" onClick={uploadFile}>\n                  Upload & Analyze\n                </button>\n              </div>\n\n              {uploading && (\n                <div className=\"progress-wrap\">\n                  <div className=\"progress-bar\">\n                    <div\n                      className=\"progress-fill\"\n                      style={{ width: `${progress}%` }}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </section>\n\n        {/* RIGHT: CHAT */}\n        <aside className=\"right\">\n          <div className=\"card chat-card\">\n            <div className=\"chat-header\">\n              <div className=\"chat-title\">Consultation</div>\n              <div className=\"chat-sub\">Chat with Dr. Raghav</div>\n            </div>\n\n            <div className=\"chat-body\">\n              {messages.map((m, i) => (\n                <div key={i} className={`chat-message ${m.role}`}>\n                  {m.role === \"bot\" && (\n                    <img className=\"avatar\" src=\"/doctor-male.png\" alt=\"doc\" />\n                  )}\n                  <div className=\"bubble\">\n                    <div className=\"bubble-text\">\n                      {m.text}\n\n                      {/* Option Buttons */}\n                      {m.showOptions && (\n                        <div className=\"option-buttons\">\n                          <button onClick={chooseChat} className=\"btn small\">\n                            üí¨ Chat with Doctor\n                          </button>\n                          <button onClick={chooseUpload} className=\"btn small\">\n                            üìÑ Upload Report\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"bubble-time\">\n                      {new Date(m.time).toLocaleTimeString()}\n                    </div>\n                  </div>\n                </div>\n              ))}\n              <div ref={chatEndRef} />\n            </div>\n\n            {/* CHAT INPUT */}\n            <div className=\"chat-input-row\">\n              <input\n                className=\"chat-input\"\n                placeholder=\"Type your message...\"\n                value={chatInput}\n                onChange={(e) => setChatInput(e.target.value)}\n                onKeyDown={(e) => e.key === \"Enter\" && sendChat()}\n              />\n              <button className=\"btn\" onClick={sendChat}>\n                Send\n              </button>\n            </div>\n          </div>\n        </aside>\n      </main>\n\n      <footer className=\"footer\">\n        ¬© {new Date().getFullYear()} AI Doctor\n      </footer>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,GAAG,CAAIC,IAAI,KAAAC,MAAA,CAAQC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,EAAAH,MAAA,CAAGD,IAAI,CAAE,CAE1F,cAAe,SAAS,CAAAK,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,KAAK,CAAC,CAAGd,QAAQ,CAACe,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,EAAE,CAAC,CAC7D,KAAM,CAACC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,MAAM,CAAC,CAAI;AACvC,KAAM,CAACkB,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACoB,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACsB,QAAQ,CAAEC,WAAW,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAC0B,QAAQ,CAAEC,WAAW,CAAC,CAAG3B,QAAQ,CAAC,MAAM,CAAC,CAChD;AACA;AACA;AAEA,KAAM,CAAC4B,QAAQ,CAAEC,WAAW,CAAC,CAAG7B,QAAQ,CAAC,CACvC,CAAE8B,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,6DAA6D,CAAEC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CACvG,CAAC,CAEF,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGpC,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACqC,WAAW,CAAEC,cAAc,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAAuC,UAAU,CAAGrC,MAAM,CAAC,IAAI,CAAC,CAE/BD,SAAS,CAAC,IAAM,CACd,GAAIsC,UAAU,CAACC,OAAO,CAAED,UAAU,CAACC,OAAO,CAACC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CACnF,CAAC,CAAE,CAACd,QAAQ,CAAES,WAAW,CAAC,CAAC,CAE3B;AACA;AACA;AACA,KAAM,CAAAM,kBAAkB,CAAIZ,IAAI,EAAK,CACnCF,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CAAEd,IAAI,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CACxC,CACEJ,IAAI,CAAE,KAAK,CACXC,IAAI,OAAAtB,MAAA,CAAQQ,QAAQ,8CAAkC,CACtDe,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACF,CAAC,CAEF;AACAW,UAAU,CAAC,IAAM,CACfhB,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CACEd,IAAI,CAAE,KAAK,CACXC,IAAI,CACF,wEAAwE,CAC1Ee,WAAW,CAAE,IAAI,CACjBd,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACF,CAAC,CACJ,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAa,UAAU,CAAGA,CAAA,GAAM,CACvBpB,WAAW,CAAC,MAAM,CAAC,CACnBE,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CACEd,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,yDAAyD,CAC/DC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACF,CAAC,CACJ,CAAC,CAED,KAAM,CAAAc,YAAY,CAAGA,CAAA,GAAM,CACzBrB,WAAW,CAAC,QAAQ,CAAC,CACrBE,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CACEd,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,qDAAqD,CAC3DC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACF,CAAC,CACJ,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAe,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI,CAAC/B,IAAI,CAAE,MAAO,CAAAgC,KAAK,CAAC,yCAAyC,CAAC,CAElE7B,YAAY,CAAC,IAAI,CAAC,CAClBE,WAAW,CAAC,CAAC,CAAC,CACdE,YAAY,CAAC,IAAI,CAAC,CAElB,KAAM,CAAA0B,IAAI,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,CAAEnC,IAAI,CAAC,CAEzB,KAAM,CAAAoC,GAAG,CAAG,GAAI,CAAAC,cAAc,CAAC,CAAC,CAChCD,GAAG,CAACE,IAAI,CAAC,MAAM,CAAEjD,GAAG,CAAC,kBAAkB,CAAC,CAAE,IAAI,CAAC,CAC/C,GAAIO,KAAK,CAAEwC,GAAG,CAACG,gBAAgB,CAAC,eAAe,CAAE,SAAS,CAAG3C,KAAK,CAAC,CAEnEwC,GAAG,CAACI,MAAM,CAACC,UAAU,CAAIC,CAAC,EAAK,CAC7B,GAAIA,CAAC,CAACC,gBAAgB,CAAE,CACtBtC,WAAW,CAACuC,IAAI,CAACC,KAAK,CAAEH,CAAC,CAACI,MAAM,CAAGJ,CAAC,CAACK,KAAK,CAAI,GAAG,CAAC,CAAC,CACrD,CACF,CAAC,CAEDX,GAAG,CAACY,kBAAkB,CAAG,IAAM,CAC7B,GAAIZ,GAAG,CAACa,UAAU,GAAK,CAAC,CAAE,CACxB9C,YAAY,CAAC,KAAK,CAAC,CACnBE,WAAW,CAAC,GAAG,CAAC,CAEhB;AACA,GAAI+B,GAAG,CAACc,MAAM,EAAI,GAAG,EAAId,GAAG,CAACc,MAAM,CAAG,GAAG,CAAE,CACzC,KAAM,CAAAC,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACjB,GAAG,CAACkB,YAAY,CAAC,CAC3C/C,YAAY,CAAC4C,MAAM,CAAC,CAEpBxC,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CACEd,IAAI,CAAE,KAAK,CACXC,IAAI,CACF,+DAA+D,CACjEC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACD,CACEJ,IAAI,CAAE,KAAK,CACXC,IAAI,CAAEsC,MAAM,CAACI,OAAO,EAAI,uBAAuB,CAC/CzC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACF,CAAC,CAEF,OACF,CAEA;AACA,GAAI,CAAAwC,OAAO,gBAAAjE,MAAA,CAAkB6C,GAAG,CAACc,MAAM,KAAG,CAC1C,GAAI,CACF,KAAM,CAAAO,IAAI,CAAGL,IAAI,CAACC,KAAK,CAACjB,GAAG,CAACkB,YAAY,CAAC,CACzCE,OAAO,CAAGC,IAAI,CAACD,OAAO,EAAIJ,IAAI,CAACM,SAAS,CAACD,IAAI,CAAC,CAChD,CAAE,MAAAE,OAAA,CAAM,CACNH,OAAO,CAAGpB,GAAG,CAACkB,YAAY,EAAIE,OAAO,CACvC,CAEA7C,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CAAEd,IAAI,CAAE,KAAK,CAAEC,IAAI,sBAAAtB,MAAA,CAAkBiE,OAAO,CAAE,CAAE1C,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CACnE,CAAC,CACJ,CACF,CAAC,CAEDoB,GAAG,CAACwB,IAAI,CAAC3B,IAAI,CAAC,CAChB,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAA4B,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,KAAM,CAAAhD,IAAI,CAAGI,SAAS,CAAC6C,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACjD,IAAI,CAAE,OAEX;AACA,GAAIH,QAAQ,CAACqD,MAAM,GAAK,CAAC,EAAIvD,QAAQ,GAAK,MAAM,CAAE,CAChDU,YAAY,CAAC,EAAE,CAAC,CAChB,MAAO,CAAAO,kBAAkB,CAACZ,IAAI,CAAC,CACjC,CAEA,GAAIL,QAAQ,GAAK,MAAM,CAAE,CACvBG,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CACEd,IAAI,CAAE,KAAK,CACXC,IAAI,CAAE,iDAAiD,CACvDC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CACjB,CAAC,CACF,CAAC,CACF,OACF,CAEAL,WAAW,CAAEe,CAAC,EAAK,CAAC,GAAGA,CAAC,CAAE,CAAEd,IAAI,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CACpEE,YAAY,CAAC,EAAE,CAAC,CAChBE,cAAc,CAAC,IAAI,CAAC,CAEpB,GAAI,CACF,KAAM,CAAA4C,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC5E,GAAG,CAAC,mBAAmB,CAAC,CAAE,CAChD6E,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEhB,IAAI,CAACM,SAAS,CAAC,CAAEW,MAAM,CAAEtE,QAAQ,CAAEc,IAAK,CAAC,CACjD,CAAC,CAAC,CAEF,GAAI,CAAAyD,KAAK,CACT,GAAI,CACF,KAAM,CAAAC,CAAC,CAAG,KAAM,CAAAP,GAAG,CAACP,IAAI,CAAC,CAAC,CAC1Ba,KAAK,CAAGC,CAAC,CAACD,KAAK,EAAIC,CAAC,CAAC1D,IAAI,EAAIuC,IAAI,CAACM,SAAS,CAACa,CAAC,CAAC,CAChD,CAAE,MAAAC,QAAA,CAAM,CACNF,KAAK,CAAG,KAAM,CAAAN,GAAG,CAACnD,IAAI,CAAC,CAAC,CAC1B,CAEAF,WAAW,CAAEe,CAAC,EAAK,CAAC,GAAGA,CAAC,CAAE,CAAEd,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAEyD,KAAK,CAAExD,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAC5E,CAAE,MAAAyD,QAAA,CAAM,CACN9D,WAAW,CAAEe,CAAC,EAAK,CACjB,GAAGA,CAAC,CACJ,CAAEd,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,4BAA4B,CAAEC,IAAI,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CACtE,CAAC,CACJ,CAAC,OAAS,CACRI,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,mBACEhC,KAAA,QAAKsF,SAAS,CAAC,MAAM,CAAAC,QAAA,eAEnBvF,KAAA,WAAQsF,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACxBvF,KAAA,QAAKsF,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBzF,IAAA,QAAKwF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,WAAS,CAAK,CAAC,cACrCzF,IAAA,QAAKwF,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,eAAa,CAAK,CAAC,EAC1C,CAAC,cACNvF,KAAA,QAAKsF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzF,IAAA,QAAKwF,SAAS,CAAC,eAAe,CAACE,GAAG,CAAC,kBAAkB,CAACC,GAAG,CAAC,KAAK,CAAE,CAAC,cAClEzF,KAAA,QAAKsF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzF,IAAA,QAAKwF,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,cAC1CzF,IAAA,QAAKwF,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,mBAAiB,CAAK,CAAC,EAC9C,CAAC,EACH,CAAC,EACA,CAAC,cAGTvF,KAAA,SAAMsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eAEzBzF,IAAA,YAASwF,SAAS,CAAC,MAAM,CAAAC,QAAA,CACtBnE,QAAQ,GAAK,QAAQ,eACpBpB,KAAA,QAAKsF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzF,IAAA,OAAAyF,QAAA,CAAI,uBAAqB,CAAI,CAAC,cAC9BvF,KAAA,QAAKsF,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBvF,KAAA,UAAOsF,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC7BzF,IAAA,UACE4F,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,cAAc,CACrBC,QAAQ,CAAGtC,CAAC,OAAAuC,eAAA,OAAK,CAAAhF,OAAO,CAAC,EAAAgF,eAAA,CAAAvC,CAAC,CAACwC,MAAM,CAACC,KAAK,UAAAF,eAAA,iBAAdA,eAAA,CAAiB,CAAC,CAAC,GAAI,IAAI,CAAC,EAAC,CACvD,CAAC,CACDjF,IAAI,CAAGA,IAAI,CAACoF,IAAI,CAAG,aAAa,EAC5B,CAAC,cACRlG,IAAA,WAAQwF,SAAS,CAAC,aAAa,CAACW,OAAO,CAAEtD,UAAW,CAAA4C,QAAA,CAAC,kBAErD,CAAQ,CAAC,EACN,CAAC,CAELzE,SAAS,eACRhB,IAAA,QAAKwF,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BzF,IAAA,QAAKwF,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BzF,IAAA,QACEwF,SAAS,CAAC,eAAe,CACzBY,KAAK,CAAE,CAAEC,KAAK,IAAAhG,MAAA,CAAKa,QAAQ,KAAI,CAAE,CAClC,CAAC,CACC,CAAC,CACH,CACN,EACE,CACN,CACM,CAAC,cAGVlB,IAAA,UAAOwF,SAAS,CAAC,OAAO,CAAAC,QAAA,cACtBvF,KAAA,QAAKsF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BvF,KAAA,QAAKsF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzF,IAAA,QAAKwF,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,cAC9CzF,IAAA,QAAKwF,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,sBAAoB,CAAK,CAAC,EACjD,CAAC,cAENvF,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBjE,QAAQ,CAAC8E,GAAG,CAAC,CAAC9D,CAAC,CAAE+D,CAAC,gBACjBrG,KAAA,QAAasF,SAAS,iBAAAnF,MAAA,CAAkBmC,CAAC,CAACd,IAAI,CAAG,CAAA+D,QAAA,EAC9CjD,CAAC,CAACd,IAAI,GAAK,KAAK,eACf1B,IAAA,QAAKwF,SAAS,CAAC,QAAQ,CAACE,GAAG,CAAC,kBAAkB,CAACC,GAAG,CAAC,KAAK,CAAE,CAC3D,cACDzF,KAAA,QAAKsF,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBvF,KAAA,QAAKsF,SAAS,CAAC,aAAa,CAAAC,QAAA,EACzBjD,CAAC,CAACb,IAAI,CAGNa,CAAC,CAACE,WAAW,eACZxC,KAAA,QAAKsF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzF,IAAA,WAAQmG,OAAO,CAAExD,UAAW,CAAC6C,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,+BAEnD,CAAQ,CAAC,cACTzF,IAAA,WAAQmG,OAAO,CAAEvD,YAAa,CAAC4C,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,4BAErD,CAAQ,CAAC,EACN,CACN,EACE,CAAC,cACNzF,IAAA,QAAKwF,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzB,GAAI,CAAA5D,IAAI,CAACW,CAAC,CAACZ,IAAI,CAAC,CAAC4E,kBAAkB,CAAC,CAAC,CACnC,CAAC,EACH,CAAC,GAvBED,CAwBL,CACN,CAAC,cACFvG,IAAA,QAAKyG,GAAG,CAAEtE,UAAW,CAAE,CAAC,EACrB,CAAC,cAGNjC,KAAA,QAAKsF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzF,IAAA,UACEwF,SAAS,CAAC,YAAY,CACtBkB,WAAW,CAAC,sBAAsB,CAClCC,KAAK,CAAE5E,SAAU,CACjB+D,QAAQ,CAAGtC,CAAC,EAAKxB,YAAY,CAACwB,CAAC,CAACwC,MAAM,CAACW,KAAK,CAAE,CAC9CC,SAAS,CAAGpD,CAAC,EAAKA,CAAC,CAACqD,GAAG,GAAK,OAAO,EAAIlC,QAAQ,CAAC,CAAE,CACnD,CAAC,cACF3E,IAAA,WAAQwF,SAAS,CAAC,KAAK,CAACW,OAAO,CAAExB,QAAS,CAAAc,QAAA,CAAC,MAE3C,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACD,CAAC,EACJ,CAAC,cAEPvF,KAAA,WAAQsF,SAAS,CAAC,QAAQ,CAAAC,QAAA,EAAC,OACvB,CAAC,GAAI,CAAA5D,IAAI,CAAC,CAAC,CAACiF,WAAW,CAAC,CAAC,CAAC,YAC9B,EAAQ,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}